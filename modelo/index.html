<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta charset="utf-8" />
    
    <!-- Seção Obrigatória -->
    <!-- video player -->
    <link
      rel="preload"
      href="https://scripts.converteai.net/lib/js/smartplayer-wc/v4/smartplayer.js"
      as="script"
    />
    <link
      rel="preload"
      href="https://scripts.converteai.net/bff5868f-b8e9-4bb4-af45-52d9b7681a6e/players/6827adf6562de3934a876ad4/v4/player.js"
      as="script"
    />
    <link
      rel="preload"
      href="https://images.converteai.net/bff5868f-b8e9-4bb4-af45-52d9b7681a6e/players/6827adf6562de3934a876ad4/thumbnail.jpg"
      as="image"
    />
    <link
      rel="preload"
      href="https://cdn.converteai.net/bff5868f-b8e9-4bb4-af45-52d9b7681a6e/6827abbccfbc403c9233109e/main.m3u8"
      as="fetch"
    />
    
    <!-- DNS -->
    <link rel="dns-prefetch" href="https://cdn.converteai.net" />
    <link rel="dns-prefetch" href="https://scripts.converteai.net" />
    <link rel="dns-prefetch" href="https://images.converteai.net" />
    <link rel="dns-prefetch" href="https://api.vturb.com.br" />
    
    <link rel="stylesheet" href="css/globals.css" />
    <link rel="stylesheet" href="css/styleguide.css" />
    <link rel="stylesheet" href="css/style.css" />
       
  </head>

  <body>
    <div class="PG-VSL">
      <div class="div">
          <div class="overlap-wrapper">
            <div class="overlap">
              <div class="mask-group">
                <img class="rectangle" /> <img class="uso" src="assets/png/exemplo-uso.png" />
            </div>
            <div class="frame-5">
              <div class="frame-wrapper">
                <vturb-smartplayer
                id="vid-6827adf6562de3934a876ad4"
                style="display: block; margin: 0 auto; width: 100%; max-width: 400px"
                >
                <div
                class="thumbnail"
                style="
                      position: relative;
                      width: 100%;
                      padding: 125% 0 0;
                      z-index: 0;
                    "
                  >
                  <img
                  class="thumbnail-image"
                  src="https://images.converteai.net/bff5868f-b8e9-4bb4-af45-52d9b7681a6e/players/6827adf6562de3934a876ad4/thumbnail.jpg"
                  style="
                        position: absolute;
                        top: 0;
                        left: 0;
                        width: 100%;
                        height: 100%;
                        object-fit: cover;
                        display: block;
                      "
                    />
                  </div>
                </vturb-smartplayer>

                <!-- esse código está causando carregamento fora de ordem -->
                <!-- <script type="text/javascript">
                  var s=document.createElement("script");
                  s.src="https://scripts.converteai.net/bff5868f-b8e9-4bb4-af45-52d9b7681a6e/players/6827adf6562de3934a876ad4/v4/player.js";
                  s.async=true;
                  document.head.appendChild(s);
                </script> -->
              </div>
              <div class="frame-7">
                <div class="frame-8">
                  <img class="som" src="assets/png/som.png" />
                  <p class="text-wrapper-3">Please turn up the volume</p>
                </div>
              </div>
            </div>
            <div class="how-to-get-out-of-wrapper">
              <p class="how-to-get-out-of">
                <span class="span">How to Get Out of Shame and Stress in Bed to </span>
                <span class="text-wrapper-4">Get Hard Whenever You Want</span>
              </p>
            </div>
            <img class="img" src="assets/png/grid.png" />
          </div>
        </div>
        
        <!-- manter footer aqui para ele não ter interferencia com o [data-delay] -->
        
        <div data-delay>
          <div class="preco">
          <div class="frame-9">
            <div class="frame-10">
              <div class="text-wrapper-5">SPECIAL OFFER FOR YOU!</div>
              <p class="text-wrapper-6">Take advantage, limited time promotion!</p>
            </div>
            <div class="frame-11">
              <div class="KIT-2 mobile-3">
                <img class="frasco" src="assets/png/frasco-1.png" />
                <div class="frame-12">
                  <div class="frame-13"><div class="element-bottle">1 BOTTLE</div></div>
                </div>
                <div class="frame-14">
                  <div class="frame-15">
                    <p class="element-bottle-2">
                      <span class="text-wrapper-7">$69</span>
                      <span class="text-wrapper-8"> </span>
                      <span class="text-wrapper-9">/Bottle</span>
                    </p>
                  </div>
                  <p class="element-shipping">
                    <span class="text-wrapper-10">+ $6.95</span>
                    <span class="text-wrapper-11"> </span>
                    <span class="text-wrapper-12">Shipping &amp; Handling</span>
                  </p>
                </div>
                <div class="frame-16">
                  <img class="img-2" src="assets/png/botao-carrinho.png" />
                  <img class="line" src="assets/svg/linha-vermelha.svg" />
                  <div class="TOTAL-wrapper">
                    <p class="TOTAL">
                      <span class="text-wrapper-13">TOTAL: $79</span>
                      <span class="text-wrapper-11">&nbsp;&nbsp;$69</span>
                    </p>
                  </div>
                  <img class="pck-cards" src="assets/png/bandeiras.png" />
                </div>
                <div class="div-wrapper"><div class="text-wrapper-14">GOOD VALUE</div></div>
              </div>
              <div class="KIT-3 mobile-1">
                <div class="frame-12">
                  <div class="frame-17"><div class="element-bottle">6 BOTTLE</div></div>
                </div>
                <div class="div-wrapper"><div class="best-value">BEST VALUE</div></div>
                <div class="frame-18">
                  <div class="frame-19">
                    <img class="checkverde" src="assets/svg/check-verde.svg" />
                    <div class="text-wrapper-15">BIGGEST DISCOUNT</div>
                  </div>
                  <div class="frame-19">
                    <img class="checkverde" src="assets/svg/check-verde.svg" />
                    <div class="text-wrapper-15">FAST &amp; FREE SHIPPING</div>
                  </div>
                  <div class="frame-20">
                    <img class="checkverde" src="assets/svg/check-verde.svg" />
                    <div class="text-wrapper-15">180 - DAYS GUARANTEE</div>
                  </div>
                </div>
                <div class="overlap-2">
                  <img class="KIT-4" src="assets/png/kit-06.png" />
                  <div class="element-bottle-wrapper">
                    <p class="element-bottle-2">
                      <span class="text-wrapper-7">$49</span>
                      <span class="text-wrapper-8"> </span>
                      <span class="text-wrapper-9">/Bottle</span>
                    </p>
                  </div>
                </div>
                <div class="frame-21">
                  <img class="img-2" src="assets/png/botao-carrinho.png" />
                  <div class="overlap-group-wrapper">
                    <div class="overlap-group-2">
                      <p class="TOTAL">
                        <span class="text-wrapper-13">TOTAL: $1074</span>
                        <span class="text-wrapper-11">&nbsp;&nbsp;$294</span>
                      </p>
                      <img class="line-2" src="assets/svg/linha-vermelha.svg" />
                    </div>
                  </div>
                </div>
              </div>
              <div class="KIT-5 mobile-2">
                <div class="frame-12">
                  <div class="frame-13"><div class="element-bottle">3 BOTTLE</div></div>
                </div>
                <div class="overlap-3">
                  <img class="KIT-6" src="assets/png/kit-03.png" />
                  <div class="GREAT-value-wrapper"><div class="text-wrapper-14">GREAT VALUE</div></div>
                </div>
                <div class="frame-22">
                  <div class="frame-19">
                    <img class="checkverde" src="assets/svg/check-verde.svg" />
                    <div class="text-wrapper-15">FAST &amp; FREE SHIPPING</div>
                  </div>
                  <div class="frame-20">
                    <img class="checkverde" src="assets/svg/check-verde.svg" />
                    <div class="text-wrapper-15">180 - DAYS GUARANTEE</div>
                  </div>
                </div>
                <div class="frame-23">
                  <p class="element-bottle-2">
                    <span class="text-wrapper-7">$59</span>
                    <span class="text-wrapper-8"> </span>
                    <span class="text-wrapper-9">/Bottle</span>
                  </p>
                </div>
                <div class="frame-24">
                  <img class="img-2" src="assets/png/botao-carrinho.png" />
                  <div class="group-2">
                    <div class="overlap-group-3">
                      <p class="TOTAL">
                        <span class="text-wrapper-13">TOTAL: $537</span>
                        <span class="text-wrapper-11">&nbsp;&nbsp;$177</span>
                      </p>
                      <img class="line-3" src="assets/svg/linha-vermelha.svg" />
                    </div>
                  </div>
                  <img class="pck-cards" src="assets/png/bandeiras.png" />
                </div>
              </div>
            </div>
            <div class="frame-25">
              <div class="text-wrapper-16">Our customers say</div>
              <div class="frame-26">
                <img class="star" src="assets/svg/estrelas.svg" />
                <div class="text-wrapper-17">4.9/5</div>
              </div>
              <p class="based-on">
                <span class="text-wrapper-18">Based on </span>
                <span class="text-wrapper-19">38,204</span>
                <span class="text-wrapper-18"> reviews</span>
              </p>
            </div>
          </div>
        </div>

          <div class="garantia">
              <div class="overlap-group">
                  <div class="ellipse"></div>
                  <img class="KIT" src="assets/png/kit-02-garantia.png" />
              </div>
              <div class="frame-4">
                <div class="div-2">
                  <div class="descricao">Guarantee</div>
                  <p class="titulo">100% Satisfaction 60-Day money back guarantee</p>
                  <p class="p">
                      Your order today is covered by our iron-clad 60-day 100% money-back guarantee. If you are not impressed
                      with the results, then at any time in the next 60 days write to us and we’ll refund every single cent
                  </p>
                  </div>
                  <button class="button">
                  <img
                      class="shopping-cart-icon"
                      src="assets/svg/carrinho-compras.svg"
                      />
                      <div class="order-now">ORDER NOW</div>
                  </button>
                  </div>
              </div>

          <div class="FAQ">
            <div class="frame-27">
              <div class="frame-28">
                <div class="text-wrapper-20">FAQ</div>
                <div class="text-wrapper-21">Frequently Asked Questions</div>
              </div>

              <div class="div-2">
                <div class="faq-item">
                    <div class="item"> <div class="text-wrapper-22">What is Blinzador?</div>
                        <img class="angulo-pequeno faq-arrow" src="assets/svg/angulo-pequeno-direito.svg" />
                    </div>
                    <div class="faq-answer"> <p>Texto de exemplo para a resposta. O Blinzador é um produto antifúngico...</p>
                    </div>
                </div>
              
                <div class="faq-item">
                    <div class="item">
                        <div class="text-wrapper-22">How does it work?</div>
                        <img class="angulo-pequeno faq-arrow" src="assets/svg/angulo-pequeno-direito.svg" />
                    </div>
                    <div class="faq-answer">
                        <p>Texto de exemplo para a segunda resposta...</p>
                    </div>
                </div>

                <div class="faq-item">
                  <div class="item">
                        <div class="text-wrapper-22">Is it safe?</div>
                        <img class="angulo-pequeno faq-arrow" src="assets/svg/angulo-pequeno-direito.svg" />
                    </div>
                    <div class="faq-answer">
                        <p>Texto de exemplo para a terceira resposta...</p>
                    </div>
                </div>
            </div>

            <div class="button-wrapper">
              <button class="button">
                <img
                class="shopping-cart-icon"
                src="assets/svg/carrinho-compras.svg"
                />
                <div class="order-now">ORDER NOW</div>
              </button>
            </div>
          </div>
      </div>
      <footer class="footer">
        <div class="frame">
          <div class="frame-2">
            <div class="frame-2">
              <div class="frame-3">
                <div class="text-wrapper">Terms &amp; Conditions</div>
                <div class="text-wrapper">Privacy Policy</div>
                <div class="text-wrapper">Contact</div>
                <div class="text-wrapper">Disclaimer</div>
                <div class="text-wrapper">Reference</div>
                <div class="text-wrapper">Refund</div>
                <div class="text-wrapper">Shipping</div>
              </div>
            </div>
            <p class="the-information-on">
              The information on this website has not been evaluated by the Food and Drug Administration. These
              products are not intended to diagnose, treat, cure or prevent any disease. The information on this
              website has not been evaluated by the Food and Drug Administration. These products are not intended to
              diagnose, treat, cure or prevent any disease.The information on this website has not been evaluated by
              the Food and Drug Administration. These products are not intended to diagnose, treat, cure or prevent
              any disease.<br /><br />The information on this website has not been evaluated by the Food and Drug
              Administration. These products are not intended to diagnose, treat, cure or prevent any disease.
            </p>
          </div>
        </div>
      </footer>
    </div>
</div>

    <script>
  // HEAD GUARD: Put this as first script in <head>
  if (typeof customElements !== "undefined") {
    const __origDefine = customElements.define.bind(customElements);
    customElements.define = function (name, constructor, options) {
      // First try direct define
      try {
        return __origDefine(name, constructor, options);
      } catch (err) {
        // If element exists, just return silently
        if (customElements.get(name)) {
          console.warn(`Custom element ${name} already defined, skipping`);
          return;
        }
        throw err; // Re-throw other errors
      }
    };
  }
</script>

  <script>
  const SMARTPLAYER_URL = "https://scripts.converteai.net/lib/js/smartplayer-wc/v4/smartplayer.js";
  const PLAYER_URL = "https://scripts.converteai.net/bff5868f-b8e9-4bb4-af45-52d9b7681a6e/players/6827adf6562de3934a876ad4/v4/player.js";

  const loadScript = (src) => new Promise((resolve, reject) => {
    if (!window.__loadedScripts) window.__loadedScripts = new Set();

    // DO NOT treat <link rel="preload" as="script"> as "already loaded"
    // Preload does not execute JS, so we must still insert the script tag.

    if (window.__loadedScripts.has(src) || document.querySelector(`script[src="${src}"]`)) {
      console.log("Script already loaded/skipped:", src);
      return resolve();
    }

    const s = document.createElement("script");
    s.src = src;
    s.async = false;
    s.onload = () => { window.__loadedScripts.add(src); resolve(); };
    s.onerror = (ev) => {
      console.warn("Script load error:", src, ev);
      // resolve to allow page to continue (we handle missing API defensively)
      resolve();
    };
    document.body.appendChild(s);
  });

  (async () => {
    console.log("Loading player scripts (defensive)...");
    try {
      await loadScript(SMARTPLAYER_URL);
    } catch (e) {
      console.warn("Error loading smartplayer core:", e);
    }

    // If the custom element used by the player is already defined, skip loading player.js to avoid duplicate registration
    try {
      const bezelAlreadyDefined =
        typeof customElements !== "undefined" &&
        !!customElements.get &&
        customElements.get("vturb-bezel");

      if (bezelAlreadyDefined) {
        console.log("vturb-bezel already defined — loading player.js while skipping duplicate define.");
        // Safely load player.js while preventing duplicate customElements.define for 'vturb-bezel'
        if (typeof customElements !== "undefined" && typeof customElements.define === "function") {
          const originalDefine = customElements.define.bind(customElements);
          try {
            // Temporarily wrap customElements.define so duplicate registration errors are caught
            if (typeof customElements !== "undefined" && typeof customElements.define === "function") {
              const originalDefine = customElements.define.bind(customElements);
              customElements.define = function (name, constructor, options) {
                try {
                  return originalDefine(name, constructor, options);
                } catch (err) {
                  // Ignore duplicate-definition errors (NotSupportedError / "already been used")
                  if (err && (err.name === "NotSupportedError" || /already been used/i.test(err.message))) {
                    console.warn("Ignored duplicate custom element define for", name);
                    return;
                  }
                  throw err;
                }
              };

              try {
                await loadScript(PLAYER_URL);
              } catch (e) {
                console.warn("Error loading player.js:", e);
              } finally {
                // restore original define in all cases
                try { customElements.define = originalDefine; } catch (_) {}
              }
            } else {
              // no customElements.define available — just load the script
              try {
                await loadScript(PLAYER_URL);
              } catch (e) {
                console.warn("Error loading player.js:", e);
              }
            }
          } catch (e) {
            console.warn("Error checking customElements:", e);
            try { await loadScript(PLAYER_URL); } catch (_) {}
          }
        } else {
          try {
            await loadScript(PLAYER_URL);
          } catch (e) {
            console.warn("Error loading player.js:", e);
          }
        }
      } else {
        try {
          await loadScript(PLAYER_URL);
        } catch (e) {
          console.warn("Error loading player.js:", e);
        }
      }
    } catch (e) {
      console.warn("Error checking customElements:", e);
      // last resort
      try { await loadScript(PLAYER_URL); } catch(_) {}
    }

    // --- mostraElementos (fixed) ---
    // helper: reveal [data-delay] using the CSS .is-visible animation
    function revealDelayed() {
      document.querySelectorAll('[data-delay]').forEach(el => {
        el.classList.add('is-visible');
      });
    }
    window.revealDelayed = revealDelayed; // ensure global access if any code calls it

    function mostraElementos(playerInstance) {
      const delayedEls = document.querySelectorAll('[data-delay]');
      console.log("Found [data-delay] elements:", delayedEls);

      // Get pitchTime from player config (it's in milliseconds)
      const config = playerInstance?.config;
      console.log("Player config:", config);
      
      if (!config?.pitchTime) {
        console.warn("No pitchTime found in config");
        return; // Let tryMostrar retry handle this
      }

      // pitchTime is already in milliseconds, don't multiply by 1000
      console.log("Setting timeout for", config.pitchTime, "milliseconds");
      setTimeout(() => {
        console.log("Showing [data-delay] elements at pitchTime");
        // previously: delayedEls.forEach(el => el.style.setProperty('display', 'block', 'important'));
        revealDelayed();
      }, config.pitchTime); // Remove the * 1000
    }

    // --- tryMostrar (fixed with retries) ---
    const tryMostrar = () => {
      const player = document.querySelector("vturb-smartplayer");
      console.log("tryMostrar: player found?", !!player, player);
      
      if (!player) {
        setTimeout(tryMostrar, 500);
        return;
      }

      // Check if player is fully initialized
      if (player.config?.pitchTime) {
        console.log("Player already initialized, showing elements");
        mostraElementos(player);
        return;
      }

      let retries = 0;
      const maxRetries = 10;
      const retryInterval = 1000; // 1 second

      const checkPlayerReady = () => {
        console.log("Checking player state:", {
          config: player.config,
          hasStore: !!player.store
        });

        if (player.config?.pitchTime) {
          console.log("Player initialized, showing elements");
          mostraElementos(player);
        } else if (retries < maxRetries) {
          retries++;
          console.log(`Player not ready, retry ${retries}/${maxRetries}`);
          setTimeout(checkPlayerReady, retryInterval);
        } else {
          console.warn("Player failed to initialize after max retries");
          // Force show elements after max retries
          // use the helper so animation runs
          revealDelayed();
        }
      };

      // Listen for ready event AND start checking
      player.addEventListener("player:ready", () => {
        console.log("player:ready fired, starting checks");
        checkPlayerReady();
      }, { once: true });

      // Also start checking immediately in case event already fired
      checkPlayerReady();
    };

    // Start watching for player
    tryMostrar();

    // --- FAQ accordion (unchanged but defensive) ---
    document.querySelectorAll('.faq-item').forEach(item => {
      const question = item.querySelector('.item');
      const answer = item.querySelector('.faq-answer');
      const arrow = item.querySelector('.faq-arrow');

      if (!question || !answer) return;
      question.addEventListener('click', () => {
        const isActive = answer.classList.contains('active');

        document.querySelectorAll('.faq-answer').forEach(ans => {
          ans.classList.remove('active');
          ans.style.maxHeight = null;
        });

        document.querySelectorAll('.faq-arrow').forEach(arr => {
          arr.classList.remove('rotated'); 
        });

        if (!isActive) {
          answer.classList.add('active');
          arrow?.classList.add('rotated');
          answer.style.maxHeight = answer.scrollHeight + 'px';
        }
      });
    });
  })();
</script>
  </body>
</html>
